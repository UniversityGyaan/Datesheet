<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>University Gyaan - Download Datesheet</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* Animated Background */
@keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(-45deg, #0b1f3a, #132e57, #1a3c6b, #0d2547);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    color: white;
}

/* Enhanced Glassmorphism Card */
.container {
    width: 90%;
    max-width: 400px;
    padding: 35px 25px;
    border-radius: 24px;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 30px 60px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.1);
    text-align: center;
    transform: translateY(0);
    transition: transform 0.3s ease;
}

.logo {
    width: 100px;
    margin-bottom: 15px;
    border-radius: 50%; 
    box-shadow: 0 10px 20px rgba(0,0,0,0.3);
}

h1 {
    color: #FFD700;
    margin: 0 0 10px 0;
    font-size: 26px;
    letter-spacing: 1px;
}

p.subtitle {
    color: #b0c4de;
    font-size: 14px;
    margin-bottom: 25px;
}

/* Improved Buttons */
.btn {
    width: 100%;
    padding: 15px;
    margin-top: 15px;
    border-radius: 14px;
    border: none;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
}

.youtube {
    background: linear-gradient(145deg, #ff0000, #c4302b);
    color: white;
    box-shadow: 0 8px 15px rgba(255, 0, 0, 0.2);
}

.whatsapp {
    background: linear-gradient(145deg, #25D366, #128C7E);
    color: white;
    opacity: 0.4;
    pointer-events: none; /* Prevents clicking while disabled */
}

.download {
    background: linear-gradient(145deg, #FFD700, #F39C12);
    color: #0b1f3a;
    opacity: 0.4;
    pointer-events: none;
}

/* Active State Hover Animations */
.btn.enabled {
    opacity: 1 !important;
    pointer-events: auto !important;
}

.btn.enabled:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 20px rgba(0,0,0,0.4);
}

.btn i {
    font-size: 20px;
}

/* Sleeker Progress Bar */
.progress-container {
    width: 100%;
    height: 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    margin-top: 25px;
    overflow: hidden;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
}

.progress-bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #FFD700, #FFF8DC);
    border-radius: 20px;
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.status {
    font-size: 14px;
    margin-top: 15px;
    color: #d1d8e0;
    font-weight: 500;
    min-height: 20px;
}
</style>
</head>

<body>

<div class="container">
    <img src="logo.png" alt="University Gyaan" class="logo">
    <h1>University Gyaan</h1>
    <p class="subtitle">Complete all steps to unlock the datesheet</p>

    <button class="btn youtube enabled" onclick="openYoutube()">
        <i class="fa-brands fa-youtube"></i> Step 1: Subscribe
    </button>

    <button class="btn whatsapp" id="waBtn" onclick="openWhatsapp()">
        <i class="fa-brands fa-whatsapp"></i> Step 2: Join Channel
    </button>

    <button class="btn download" id="downloadBtn" onclick="downloadFile()">
        <i class="fa-solid fa-lock-open"></i> Download Datesheet
    </button>

    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="status" id="statusText">Waiting for YouTube subscription...</div>
</div>

<script>
let ytStart = 0;
let ytDone = false;
let waDone = false;

function openYoutube(){
    ytStart = Date.now();
    window.open("https://www.youtube.com/@University_Gyaan?sub_confirmation=1","_blank");
    document.getElementById("statusText").innerText = "Waiting for verification (Stay for 8s)...";
}

function openWhatsapp(){
    window.open("https://whatsapp.com/channel/0029Va8mCyHDuMRolLgWPM2S","_blank");
    document.getElementById("statusText").innerText = "Verifying WhatsApp connection...";
    
    // Simulating WhatsApp verification time
    setTimeout(() => {
        waDone = true;
        updateProgress();
    }, 5000); // 5 sec stay required
}

document.addEventListener("visibilitychange", function(){
    if(document.visibilityState === "visible" && ytStart !== 0 && !ytDone){
        let seconds = (Date.now() - ytStart) / 1000;

        if(seconds >= 8){
            ytDone = true;
            document.getElementById("waBtn").classList.add("enabled");
            document.getElementById("statusText").innerText = "YouTube verified! Now join WhatsApp.";
            updateProgress();
        } else {
            document.getElementById("statusText").innerText = "Please stay on YouTube a bit longer!";
            ytStart = 0; // Reset so they click again
        }
    }
});

function updateProgress(){
    let progress = 0;

    if(ytDone) progress = 50;
    if(ytDone && waDone) progress = 100;

    document.getElementById("progressBar").style.width = progress + "%";

    if(progress === 100){
        document.getElementById("downloadBtn").classList.add("enabled");
        
        // Change text and icon on completion
        const statusEl = document.getElementById("statusText");
        statusEl.innerHTML = "ðŸŽ‰ Verification complete. File unlocked!";
        statusEl.style.color = "#FFD700";
        
        const dlBtn = document.getElementById("downloadBtn");
        dlBtn.innerHTML = '<i class="fa-solid fa-cloud-arrow-down"></i> Download Datesheet';
    }
}

function downloadFile(){
    if(ytDone && waDone){
        // File name updated as requested
        window.location.href = "Private Datesheet.pdf"; 
    }
}
</script>

</body>
</html>
